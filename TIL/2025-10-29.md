# 엔티티 매니저의 역할

엔티티 매니저에 대해서 설명하기 위해서 먼저 영속성 컨텍슽트에 대한 이해가 필요하다.

## 영속성 컨텍스트

영속성 컨텍스트는 엔티티에 대해서 변경감지, 쓰기지연, 캐시 등 영속 연산을 지원할 수 있는 환경이다.
엔티티 매니저는 이런 연산을 도와주는 기능이다.

엔티티의 영속화 상태는 4가지로 나뉜다.

1. 영속
2. 준영속
3. 비영속
4. 삭제

5. 영속: 엔티티가 영속성 컨텍스트에 의해 관리되는 상태이다. 이 상태의 엔티티를 변경하면 데이터베이스에 변경된 내용이 반영된다.
6. 준영속: 영속성 컨텍스트로 관리되었다가 영속화가 끊어진 상태를 말한다. 트랜잭션 종료, 영속성 컨텍스트 종료로 인해 준영속 상태가 될 수 있다. 이 상태에서 변경하면 데이터베이스에 반영되지 않는다.
7. 비영속: 새로운 엔티티가 생성되고, 영속화 되지 않은 상태로 데이터베이스와 관련이 없는 상태이다. 메모리에만 존재하는 상태
8. 삭제: 영속성 컨텍스트에서 엔티티를 삭제하는 동작으로 데이터베이스에서 해당 엔티티에 매핑된 데이터가 삭제된다.

느낀점: 스프링부트에서 항상 SpringDataJpa 라이브러리를 사용하면서 엔티티 매니저가 어떻게 동작하는지 제대로 살펴보지 못했다는 생각이 들었다. 엔티티 매니저가 SpringDataJpa에서 어떻게 동작하고, 엔티티의 영속상태를 어떻게 관리하는지 다시 공부해볼 필요성을 느꼈다.
