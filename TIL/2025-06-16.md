# CPU 스케줄링에 대해서 설명해주세요.

CPU 스케줄링은 운영체제가 프로세스들에게 공정하고 합리적으로 CPU 자원을 배분하는 것을 의미한다. CPU 스케줄링은 선점형과 비선점현 방식으로 구현할 수 있다.

## 선점형 스케줄링과 비선점형은 각각 어떤 특징이 존재하는가?

### 선점형 스케줄링(Preemptive Scheduling)

프로세스가 CPU를 할당받아서 작업을 하고 있는데, 운영체제가 강제로 자원을 빼앗아 작업중이던 프로세스가 멈추고, 다시 CPU 할당을 기다리는 특징
응답시간이 낮아지고, 효율적이다. 하지만 컨텍스트 스위칭 오버헤드가 발생할 수 있으며 경쟁 상태가 발생할 수 있다. (경쟁상태: 서로 자원을 차지하려는 현상, 여기서 자원은 CPU를 말하는 것일 것)

### 비선점형 스케줄링(Non-preemptive Scheduling)

하나의 프로세스가 자원을 사용하고 있다면 해당 프로세스가 종료되거나 스스로 대기 상태(인터럽트, 트랩 발동으로 인한 대기)로 전환되기 전까지 다른 프로세스가 자원을 점유할 수 없는 스케줄링 방식을 의미한다. 컨텍스트 스위칭 비용이 상대적으로 적지만, 응답 시간이 길어질 수 있다.

## CPU 스케줄링 알고리즘

### First Come First Seved(FCFS)

ready 상태의 프로세스가 대기하는 큐인 ready Queue에 도작한 순서대로 CPU를 할당해준다.  
비선점형 스케줄링 방식이다.  
처리시간이 긴 프로세스가 먼저 도달하여 효율성을 낮추는 convey effect(호위 효과)가 발생할 수 있다.

### Short Job First(SJF(최단 작업 우선))

다른 프로세스가 먼저 도착했어도 CPU burst time(CPU 사용시간) 이 짧은 프로세스에게 CPU를 할당해주는 비선점형(Non-Preemptive) 스케줄링이다.  
convey effect(호위효과)를 방지하고, 평균 대기 시간이 짧다는 이점이 존재한다.  
이 스케줄링은 CPU 사용이 짧은 job을 선호하므로 사용 시간이 긴 프로세스는 영원히 CPU를 할당받지 못하고 ready Queue에서 무한정 대기하게 되는 기아현상(Starvation)이 발생할 가능성이 있다.

### Round Robin(RR)

현대적인 CPU 스케줄링으로, 선입 선처리 스케줄링에 타임 슬라이 개념이 추가되어, 각 프로세스마다 CPU를 타임 슬라이스동안 이용하고 다른 프로세스에게 선점당하는 스케줄링입니다.  
타임 슬라이스가 너무 길어지면 선입 선처리와 같아지면서 convey effect가 발생할 수 있다. 반대로 너무 짧으면 context switch로 overhead가 발생한다.

### Short Remaining Time First(SRTF, 최소 잔여 시간 우선)

현재 수행중인 프로세스의 남은 burst time(이용시간)보다 짧은 CPU burst time을 가진 새로운 프로세스가 도착하면 CPU를 빼앗아 새로운 프로세스에게 할당해주는 선점형 스케줄링이다.  
새로운 프로세스가 도달할 때마다 스케줄링을 다시하므로 CPU burst time(CPU 사용시간)을 측정할 수 없다는 문제가 있다.

### Priority Scheduling(우선순위 스케줄링)

우선순위가 가장 높은 프로세스에게 CPU 를 할당하는 스케줄링이다. 우선순위란 정수로 표현하게 되고 작은 숫자가 우선순위가 높다.  
선점형과 비선점형 두가지를 모두 구현하고 있는데  
더 높은 우선순위 프로세스가 ready Queue에 도작하면 실행 중인 프로세스를 멈추고 CPU를 선점하는 선점형 스케줄링이 있고,  
더 높은 우선순위의 프로세스가 도착하면 Ready Queue의 Head에 넣는 비선점형 스케줄링이 있다.

### Mulilevel Queue(다단계 큐)

우선 순위별로 준비 큐를 여러 개 사용하는 방식입니다. 우선 순위가 가장 높은 큐에 있는 프로세스들을 먼처 처리하고, 우선순위가 가장 높은 큐가 비어 있다면, 그 다음 우선순위 큐의 프로세스들을 처리합니다.

## 우선 순위가 존재하는 스케줄링은 기아 현상이 발생할 텐데, 어떻게 해결할 수 있나요?

최단 작업 우선(SJF), 최소 잔여 시간(SRT)이나 다단계 큐 스케줄링은 일종의 우선 순위 스케줄링이며, 기아 현상이 발생할 수 있다.

### Aging

기아 현상을 방지하기 위해서는 대표적으로 에이징 기법이 존재한다. 에이징(Aging) 이란 오랫동안 대기한 프로세스의 우선순위를 점차 높이는 방식이다.

예를 들어, 다단계 큐 스케줄링의 기아 현상 문제를 해결하기 위해서 에이징 기법이 적용된 다단계 피드백 큐 스케줄링(Multilevel Feedback Queue Scheduling) 방식이 존재한다. 해당 방식은 새로 준비 상태가 된 프로세스가 있다면, 우선순위가 가장 높은 우선순위 큐에 삽입되고 타임 슬라이스 동안 실행된다. 만약, 해당 큐에서 실행이 끝나지 않는다면 프로세스는 다음 우선순위 큐에 삽입됩니다.(결국 CPU를 오래 사용해야 하는 프로세스는 점차 우선순위가 낮아집니다.) 만약 우선순위가 낮은 큐에서 너무 오래 기다리고 있는 프로세스가 있다면 점차 우선순위가 높은 큐로 이동시키는 에이징 기법을 적용해 기아 현상을 예방한다.
